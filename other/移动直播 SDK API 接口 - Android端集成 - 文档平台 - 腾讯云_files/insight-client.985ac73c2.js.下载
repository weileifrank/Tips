!function(r){var n={};function o(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return r[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}o.m=r,o.c=n,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(r,n,function(e){return t[e]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=2)}([function(e,p){p.defaults={},p.set=function(e,t,r){var n=r||{},o=p.defaults,i=n.expires||o.expires,a=n.domain||o.domain,s=void 0!==n.path?n.path:void 0!==o.path?o.path:"/",c=void 0!==n.secure?n.secure:o.secure,u=void 0!==n.httponly?n.httponly:o.httponly,l=void 0!==n.samesite?n.samesite:o.samesite,f=i?new Date("number"==typeof i?(new Date).getTime()+864e5*i:i):0;document.cookie=e.replace(/[^+#$&^`|]/g,encodeURIComponent).replace("(","%28").replace(")","%29")+"="+t.replace(/[^+#$&/:<-\[\]-}]/g,encodeURIComponent)+(f&&0<=f.getTime()?";expires="+f.toUTCString():"")+(a?";domain="+a:"")+(s?";path="+s:"")+(c?";secure":"")+(u?";httponly":"")+(l?";samesite="+l:"")},p.get=function(e){for(var t=document.cookie.split(";");t.length;){var r=t.pop(),n=r.indexOf("=");if(n=n<0?r.length:n,decodeURIComponent(r.slice(0,n).replace(/^\s+/,""))===e)return decodeURIComponent(r.slice(n+1))}return null},p.erase=function(e,t){p.set(e,"",{expires:-1,domain:t&&t.domain,path:t&&t.path,secure:0,httponly:0})},p.all=function(){for(var e={},t=document.cookie.split(";");t.length;){var r=t.pop(),n=r.indexOf("=");n=n<0?r.length:n,e[decodeURIComponent(r.slice(0,n).replace(/^\s+/,""))]=decodeURIComponent(r.slice(n+1))}return e}},function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function c(e){return"function"==typeof e}function u(e){return"object"==typeof e&&null!==e}function l(e){return void 0===e}((e.exports=n).EventEmitter=n).prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,r,n,o,i,a;if(this._events||(this._events={}),"error"===e&&(!this._events.error||u(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var s=new Error('Uncaught, unspecified "error" event. ('+t+")");throw s.context=t,s}if(l(r=this._events[e]))return!1;if(c(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:o=Array.prototype.slice.call(arguments,1),r.apply(this,o)}else if(u(r))for(o=Array.prototype.slice.call(arguments,1),n=(a=r.slice()).length,i=0;i<n;i++)a[i].apply(this,o);return!0},n.prototype.on=n.prototype.addListener=function(e,t){var r;if(!c(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,c(t.listener)?t.listener:t),this._events[e]?u(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,u(this._events[e])&&!this._events[e].warned&&(r=l(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&0<r&&this._events[e].length>r&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},n.prototype.once=function(e,t){if(!c(t))throw TypeError("listener must be a function");var r=!1;function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,t){var r,n,o,i;if(!c(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(o=(r=this._events[e]).length,n=-1,r===t||c(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(u(r)){for(i=o;0<i--;)if(r[i]===t||r[i].listener&&r[i].listener===t){n=i;break}if(n<0)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(n,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(c(r=this._events[e]))this.removeListener(e,r);else if(r)for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){return this._events&&this._events[e]?c(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(c(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t,r){"use strict";r.r(t);var n={};r.r(n),r.d(n,"config",function(){return F}),r.d(n,"register",function(){return Q}),r.d(n,"watch",function(){return m}),r.d(n,"care",function(){return g}),r.d(n,"fill",function(){return A}),r.d(n,"captureTrace",function(){return d}),r.d(n,"EventLevel",function(){return b}),r.d(n,"shutdown",function(){return G}),r.d(n,"on",function(){return Y}),r.d(n,"off",function(){return Z}),r.d(n,"emit",function(){return ee});var o=r(1);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e){return"function"==typeof e}function u(e){return e&&"object"===i(e)}function a(e){return"string"==typeof e}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c="object"===("undefined"==typeof crypto?"undefined":s(crypto))&&crypto.getRandomValues?function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:20,t=self.crypto;e=e||21;var r="",n=t.getRandomValues(new Uint8Array(e));for(;0<e--;)r+="_~getRandomVsCrypwhil0214563789bcfjkquvxzABDEFGHIJKLMNOPQSTUWXYZ"[63&n[e]];return r}:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:20,t="";for(;0<e--;)t+="_~varfunctio0125634789bdegjhklmpqswxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[64*Math.random()|0];return t};function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw i}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function T(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"Object";if("object"===f(e)){var r=Object.entries(e).filter(function(e){var t=l(e,2),r=t[0],n=t[1];return r.length<20&&!E(n)}).map(function(e){var t=l(e,2),r=t[0],n=t[1];return null===n||"object"!==f(n)?(n=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:50;return a(e)?e.length<=t?e:e.slice(0,t-3)+"...":e}(String(n))||"<empty>",/\n/.test(n)&&(n="<text>"),[r,n].join("=")):r}).slice(0,6).join(", ");return"".concat(t,"(").concat(r,")")}}function p(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var v=["imgcache.qq.com/qcloud/insight/insight-client"];function h(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new Error("captureStack");return t&&t.stack?(e=t.stack,e.split(/\r?\n/g).filter(function(t){return!v.some(function(e){return-1<t.indexOf(e)})}).join("\n")):""}function d(e,t,r){var n,o;return e&&"object"===y(e)?(n=e.message||e.msg||T(e,t),o=e.stack):"string"==typeof e&&(n=e),n||(n=t||"[Unknown Error]"),o||(o=r||h(new Error(n))),{message:n,stack:o}}function L(e){for(var t=arguments.length,r=new Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return{message:e.message,stack:[e.stack].concat(p(r.filter(Boolean).map(function(e){return e.stack}))).join("\n")}}function m(n,o,i){return function(){var e=arguments,t=function(){if(!i)return{};var e=arguments;try{return i.apply(this,e)}catch(e){return d(e)}}.apply(this,e);if(null!==t){var r=Object.assign(d(new Error(t&&t.message||"监听的方法被调用")),t);o.push(r)}return n.apply(this,e)}}function g(o,e){if("function"!=typeof o)return o;try{if(o.__insight_internal__||o.__insight_careto__)return o;if(o.__insight_careby__)return o.__insight_careby__}catch(e){return o}var i=e.capture,a=e.before,s=e.after,t=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];E(a)&&a.apply(this,t);try{return t=t.map(function(e){return g(e,{capture:i})}),o.apply(this,t)}catch(e){var n=d(e);i(n,o,e)}finally{if(E(s))try{s.apply(this,t)}catch(e){}}};try{for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(t[r]=o[r])}catch(e){}return t.prototype=o.prototype,(o.__insight_careby__=t).__insight_careto__=o,t}var b={Info:0,Warn:1,Error:2},_=r(0),w=r.n(_);function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function k(){var e,t=function(){var e=[],t=window.__IDC_DOMAINS__;if("object"===j(t))for(var r in t)!0===t[r]&&e.push(r);return{idcDomains:e.join("; "),idcDomainCount:e.length}}();return{path:[location.pathname,location.hash].join("").replace(/^\/#/,""),uin:(e=w.a.get("uin"),e?parseInt(e.replace(/\D/g,""),10):0),quid:w.a.get("qcloud_uid"),nickname:function(){try{return document.querySelector(".qc-header-nav .qc-nav-user .qc-user-name").textContent.trim()}catch(e){return"<unknown>"}}(),idcDomains:t.idcDomains,idcDomainCount:t.idcDomainCount}}function O(e){return(E(e)||u(e))&&(e.__insight_internal__=!0),e}var S="https://insight.cloud.tencent.com/event";var x="function"==typeof navigator.sendBeacon?function(e){navigator.sendBeacon(S,JSON.stringify(e))}:function(e){var t=XMLHttpRequest;/msie (\d+)/i.test(navigator.userAgent)&&+RegExp.$1<=9&&"function"==typeof XDomainRequest&&(t=XDomainRequest);var r=O(new t);r.open("POST",S),r.send(JSON.stringify(e))};function R(e){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var P,C=[[],[],[]],I=function(e,t){if(t)x(e);else{var r=C[e.level]||C[0];for(r.push(e);20<r.length;)r.shift();e.level>=b.Warn&&function(){var e,t,r=C;C=[[],[],[]];for(var n=[];e=r.pop();)for(;t=e.pop();)n.push(t);x(n)}()}};function A(e,t,r){try{if(!(t in e))return;var n=e[t];if(E(n)){if(n.__insight_fillby__)return void(e[t]=n.__insight_fillby__);var o=r(n);(o.__insight_fillto__=n).__insight_fillby__=o,e[t]=o}}catch(e){}}try{P=localStorage.getItem("debugInsight")}catch(e){}var M,q=new o.EventEmitter,D="qcconsole",N="on",H=c(),U=+new Date,X=function(){return+new Date},B=!1,W=null,J=function(e){return!0},K=function(e,t){return function(){try{return e.apply(void 0,arguments)}catch(e){return t.apply(void 0,arguments)}}},F=function(e){u(e)&&(a(e.app)&&(D=e.app),a(e.lid)&&(H=e.lid),"number"==typeof e.born&&(U=e.born),E(e.time)&&(X=K(e.time,X)),"boolean"==typeof e.iframeMode&&(B=e.iframeMode),u(e.iframeTarget)&&(W=e.iframeTarget),E(e.shouldReportEvent)&&(J=K(e.shouldReportEvent,J)))},G=function(){N="off"},V=function(e,t,r,n){if("on"===N){var o=function(e,t,r,n,o,i,a){var s=Object.assign({app:e,event:o,lid:t,born:r,at:n()},k(),i,a),c={};for(var u in s)if(s.hasOwnProperty(u)){var l=s[u];if("object"===R(l))try{l=JSON.stringify(l)}catch(e){l=e.message}"function"==typeof l&&(l=l.name),c[u]=l}return c}(D,H,U,X,e,t,r);if(q.emit("eventCreate",o),P){var i=["INFO","WARN","ERROR"][o.level],a=["skyblue","yellow","#fb7a7a"][o.level];console.info("%c%s%c %c%s %c%s %c(+%dms)","padding: 1px 4px; border-radius: 2px; background: "+a,i,"background: none","font-weight: bold",o.event,"font-weight: normal; color: purple; background: #f0f0f0; display: inline-block; padding: 2px; border-raidus: 1px;",o.message,"font-weight: normal; color: #999",o.at-o.born,o)}J(o)&&I(o,n)}};M=V,window.addEventListener("message",O(function(e){var t;try{t=JSON.parse(e.data)}catch(e){return}if(u(t)&&"insight-event"===t.type){var r=t.payload,n=r.name,o=r.meta,i=r.data,a=r.urgent;n&&M(n,o,i,a)}}));var z=function(i,a){return{name:i,meta:a,push:function(e,t){var r,n,o;B?(r=W||parent,n={name:i,meta:a,data:e,urgent:t},o=JSON.stringify({type:"insight-event",payload:n}),r.postMessage(o,r.origin)):V(i,a,e,t)}}},Q=function(e,t){if(!t||void 0===t.level)throw new Error("Insight: 请提供注册事件的公共属性，且至少包含 level 字段");if(-1===[b.Info,b.Warn,b.Error].indexOf(t.level))throw new Error("Insight: level 取值不正确，请使用 Insight.EventLevel 中的枚举值");return z(e,t)},Y=q.on.bind(q),Z=q.removeListener.bind(q),ee=q.emit.bind(q);function te(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function re(e,t,r){return t&&te(e.prototype,t),r&&te(e,r),e}function ne(e){return(ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oe(e){for(var t,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:80,n=e,o=[],i=0,a=0,s=" > ".length;n&&i++<10&&!("html"===(t=ie(n))||1<i&&a+o.length*s+t.length>=r);)o.push(t),a+=t.length,n=n.parentNode;return o.reverse().join(" > ")}function ie(e){var t,r,n,o,i,a=[];if(!e||!e.tagName)return"";if(a.push(e.tagName.toLowerCase()),e.id&&a.push("#".concat(e.id)),(t=e.className)&&"string"==typeof t)for(r=t.split(/\s+/),i=0;i<r.length;i++)a.push(".".concat(r[i]));var s=["type","name","title","alt"];for(i=0;i<s.length;i++)n=s[i],(o=e.getAttribute(n))&&a.push("[".concat(n,'="').concat(o,'"]'));return a.join("")}function ae(e,t){console.log("%c%s","background-color: #fdf0f0; color: red;","".concat(e,"\n").concat("---------------------------------------------------------","\n").concat(t.stack))}var se={speed:function(e,t){return se.bytes(e,t,["byte/s","K/s","M/s","G/s"])},bytes:function(e,t,r){for(var n=(r=r||["byte","K","M","G","T","P"]).shift();1024<e&&r.length;)e/=1024,n=r.shift();return e.toFixed("number"==typeof t?t:1)+n}};function ce(e,t,r){var n=ue(t),o=!0,i=!1,a=void 0;try{for(var s,c=n[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var u=s.value;if(u in e)return[e[u],u]}}catch(e){i=!0,a=e}finally{try{o||null==c.return||c.return()}finally{if(i)throw a}}var l=!0,f=!1,p=void 0;try{for(var y,v=r[Symbol.iterator]();!(l=(y=v.next()).done);l=!0){var h=ue(y.value),d=!0,m=!1,g=void 0;try{for(var b,_=n[Symbol.iterator]();!(d=(b=_.next()).done);d=!0){var w=b.value,j=!0,k=!1,O=void 0;try{for(var S,E=h[Symbol.iterator]();!(j=(S=E.next()).done);j=!0){var T=S.value+w;if(T in e)return[e[T],T]}}catch(e){k=!0,O=e}finally{try{j||null==E.return||E.return()}finally{if(k)throw O}}}}catch(e){m=!0,g=e}finally{try{d||null==_.return||_.return()}finally{if(m)throw g}}}}catch(e){f=!0,p=e}finally{try{l||null==v.return||v.return()}finally{if(f)throw p}}return[null,null]}function ue(e){return[e,le(e),fe(e),fe(le(e))].reduce(function(e,t){return-1<e.indexOf(t)?e:e.concat([t])},[])}function le(e){return e.substr(0,1).toUpperCase()+e.substr(1)}function fe(e){return"_"+e}function pe(e,t){return he(e)||function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw i}}return r}(e,t)||ve()}function ye(e){return he(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||ve()}function ve(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function he(e){if(Array.isArray(e))return e}function de(e){return(de="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function me(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(e){ge(t,e,r[e])})}return t}function ge(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function be(e){/^https?:\/\//.test(e)||/^\//.test(e)||(e="/"+e);var t=ye((e=e.split("//").pop()).split("/")),r=t[0],n=pe(t.slice(1).join("/").split("?"),2),o=n[0],i=n[1];return o="/"+o,i&&(i=i.split("&").filter(function(e){return!/=[\d\.]+$/.test(e)}).join("$")),{hostname:r||location.hostname,cgi:i?[o,i].join("?"):o}}var _e=[{install:function(e){var t=e.register,r=e.captureTrace,n=e.EventLevel;if("stackTraceLimit"in Error)try{Error.stackTraceLimit=20}catch(e){}var o=t("js-error",{level:n.Error});return window.addEventListener("error",function(e){o.push(function(o){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{},t=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),t.forEach(function(e){var t,r,n;t=o,n=i[r=e],r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n})}return o}({source:"window"},r(e&&e.error||e,"捕获到 window.onerror")))}),{jsErrorBus:o}}},{install:function(e){var t=e.register,y=e.captureTrace,v=t("promise-error",{level:e.EventLevel.Error}),r=function(o){var e=function(){function e(r){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.promise=new o(function(e,t){return r(e,function(e){try{n.promise.trace=y("PromiseRejection (async)")}catch(e){}t(e)})}),this.promise.createTrace=y("Promise (async)")}return re(e,null,[{key:"reject",value:function(e){var t=o.reject(e);try{t.trace=y("Promise rejection (async)")}catch(e){}return t}}]),re(e,[{key:"then",value:function(){var e;return(e=this.promise).then.apply(e,arguments)}},{key:"catch",value:function(){var e;return(e=this.promise).catch.apply(e,arguments)}},{key:"finally",value:function(){var e;return(e=this.promise).finally.apply(e,arguments)}}]),e}();e.__OriginPromise__=o;for(var t=["resolve","reject","all","race","try","catch","finally"],r=0;r<t.length;r++){var n=t[r];!e[n]&&E(o[n])&&(e[n]=o[n].bind(o))}return e};A(window,"Promise",r);var n=window.Promise;Object.defineProperty(window,"Promise",{configurable:!0,enumerable:!0,set:function(e){n=r(e)},get:function(){return n}});var h,d,m,o=function(e){if(n=(r=t=e)&&r.reason||r,o=t&&t.promise,i=o&&o.trace,a=!0,n!=h&&(a=!1,h=n),i&&i!==d&&(a=!1,d=i),clearTimeout(m),m=setTimeout(O(function(){h=d=void 0}),10),!a){var t,r,n,o,i,a,s,c,u,l=(s=e)&&s.reason||s,f=(u=(c=e)&&c.promise)&&u.trace?L(u.trace,u.createTrace):null,p=y(l,"UnhandledRejection");v.push(L(p,f))}};return Object.defineProperties?Object.defineProperties(window,{onunhandledrejection:{configurable:!1,enumerable:!0,get:function(){return o},set:function(){console.warn("注意：我们发现你的业务使用了 window.onunhandledrejection 来捕获 Promise 错误，目前控制台已统一收集这些错误。如你确实需要使用，请与平台同事联系，谢谢合作！"),console.trace("调用位置：")}}}):window.onunhandledrejection=o,{promiseErrorBus:v}}},{install:function(e){var t=e.register,r=e.EventLevel,o=t("cookie",{level:r.Info}),i=!1;e.on("eventCreate",function(n){!i&&n.level>r.Info&&(i=!0,o.push({message:"Cookie 上报",cookie:document.cookie})),"string"==typeof n.cookie&&(n.cookie=n.cookie.replace(/(skey|p_skey|cpskey)=(.+?)(;|$)/g,function(e,t,r){return(r=function(e){if(!e||"string"!=typeof e)return e;var t=e.length;if(!t)return e;var r=Math.ceil(t/6);return e.slice(0,r)+"******"+e.slice(t-r)}(r))?t+"="+(n[t]=r)+";":e}))})}},{install:function(e){var t=e.register,r=e.watch,n=t("error-log",{level:e.EventLevel.Warn});"object"===("undefined"==typeof console?"undefined":ne(console))&&A(console,"error",function(e){return r(e,n,function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(1!==t.length)return{message:t.join(", ")||"console.error 输出"};var n=t[0];if("string"==typeof n)return{message:n};var o={message:n&&n.message||T(n)};return n&&n.stack&&(o.stack=n.stack),o})})}},{install:function(e){var o=0,i=null,a=e.register("click",{level:e.EventLevel.Info}),s=e.register("keypress",{level:e.EventLevel.Info}),c=function(e,t){if(o=void 0,i!==e){var r,n;i=e;try{r=oe(e.target),n=oe(e.target,300)}catch(e){n=r="<unknown>"}switch(e.type){case"click":a.push({message:"点击 "+r,fullTarget:n,stack:t});break;case"keydown":s.push({message:"输入 "+r,fullTarget:n,stack:t})}}};return document.addEventListener("click",e.reportClick,!1),document.addEventListener("keydown",e.reportKeypress,!1),{reportClick:O(c),reportKeypress:O(function(e,t){var r;try{r=e.target}catch(e){return}var n=r&&r.tagName;n&&("INPUT"===n||"TEXTAREA"===n||r.isContentEditable)&&(o||c(e,t),o&&clearTimeout(o),o=setTimeout(function(){o=void 0},3e3))})}}},{install:function(a){for(var s=a.captureTrace,c=a.jsErrorBus,e=function(e){var t=window,r=t[e]&&t[e].prototype;r&&r.hasOwnProperty&&r.hasOwnProperty("addEventListener")&&(A(r,"addEventListener",function(i){return function(r,e,t){if(!e)return i.call(this,r,e,t);var o=s("".concat(r," (event)")),n={before:function(e){if(e){var t,r;try{t=e.type,r=e.target}catch(e){return}var n=function(e){return r instanceof Node&&t===e};n("click")&&E(a.reportClick)?a.reportClick(e,o.stack):n("keydown")&&E(a.reportKeypress)?a.reportKeypress(e,o.stack):r instanceof XMLHttpRequest&&r.__insight_follow__&&(o=L(o,r.__insight_follow__.sendTrace))}},capture:function(e){var t=L(e,o);c.push(function(o){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{},t=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),t.forEach(function(e){var t,r,n;t=o,n=i[r=e],r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n})}return o}({source:r+"-event"},t)),ae("事件处理器 <".concat(r,"> 发生异常："),t)}};try{e.handleEvent&&(e.handleEvent=g(e.handleEvent,n))}catch(e){}return i.call(this,r,g(e,n),t)}}),A(r,"removeEventListener",function(n){return function(e,t,r){return"function"==typeof t&&(t=t.__insight_careby__||t),n.call(this,e,t,r)}}))},t=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],r=0;r<t.length;r++){e(t[r])}}},{install:function(e){var c=e.care,u=e.captureTrace,l=e.jsErrorBus,t=function(s){var e=window;"function"==typeof e[s]&&A(e,s,function(a){return function(e){for(var r=u("".concat(s," (async)")),t=c(e,{capture:function(e){var t=L(e,r);l.push(function(o){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{},t=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),t.forEach(function(e){var t,r,n;t=o,n=i[r=e],r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n})}return o}({source:s},t)),ae("<".concat(s,"> 异常："),t)},after:function(){"setInterval"!==s&&(r=null)}}),n=arguments.length,o=new Array(1<n?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];return a.call.apply(a,[this,t].concat(o))}})};t("setTimeout"),t("setInterval"),t("requestAnimationFrame")}},{install:function(e){if(u(window.seajs)){var t=e.register,r=e.EventLevel,i=t("resource-error",{level:r.Error}),n=t("resource-retry",{level:r.Info}),a=!1,s=function(e){return(e||"").split(/\//g).pop().split("?").shift()},c=function(e){var t=[];return 0<e.retry&&t.push("retry: "+e.retry),isNaN(+e.status)||t.push("status: "+e.status),0<e.rtt&&t.push("rtt: "+e.rtt+"ms"),0<e.speed&&t.push("speed: "+se.speed(e.speed)),0<e.bytes&&t.push("size: "+se.bytes(e.bytes)),e.server&&t.push("server: "+e.server),0<t.length?" ("+t.join("; ")+")":""};seajs.on("resource-error",function(e){var t=e.url,r=s(t),n=e.type;switch(n){case"js":case"css":var o=n.toUpperCase()+" 加载失败："+r+c(e);i.push(Object.assign(e,{message:o})),"js"===n&&(a=!0)}}),seajs.on("resource-load",function(e){if(0<e.retry){var t=e.url,r="重试成功："+s(t)+c(e);n.push(Object.assign(e,{message:r}),!0)}}),e.on("eventCreate",function(e){a&&(e.asle=!0)})}}},{install:function(e){var t=e.register,r=e.EventLevel,n=e.shutdown,o=t("unload",{level:r.Info});window.addEventListener("unload",function(){o.push({message:"用户离开"},!0),n()})}},{install:function(e){if("XMLHttpRequest"in window){var i,a,s,c,t=e.register,u=e.care,l=e.captureTrace,r=e.EventLevel,f=e.jsErrorBus,k=t("xhr-error",{level:r.Error}),O=t("xhr-slow",{level:r.Warn}),S=t("cgi-error",{level:e.EventLevel.Warn}),p=(i="insight-cgi-trace-d93xK9m42pLooMc3945kxJdsIuMMd4551Scd-",a=new RegExp("(&|\\?)".concat(i,"(\\d+)($|&)")),s={},c=0,{provide:function(t,e){if("string"!=typeof t)return t;try{var r=++c,n=be(t).cgi;s[r]={trace:l("CGI Call: "+n),options:e};var o=-1<t.indexOf("?")?"&":"?";return"".concat(t).concat(o).concat(i).concat(r)}catch(e){return t}},extract:function(t){try{var e,r,n=a.exec(t);if(n){t=t.replace(a,function(e,t,r,n){switch(t+(n||"$")){case"?$":return"";case"?&":return"?";case"&&":return"&";case"&$":return""}});var o=n[2],i=s[o];i&&(e=i.trace,r=i.options,delete s[o])}return{url:t,cgiTrace:e,cgiTraceOptions:r}}catch(e){return{url:t}}}}),y=function(e){A(e,"open",function(s){return function(e,t){var r=p.extract(t),n=r.url;!function(t,r){function n(){r.aborted=!0}function o(e){e&&(0<e.total||0<e.loaded)&&(r.receiveBytes=Math.max(e.total,e.loaded))}t.__insight_internal__||(t.__insight_follow__=r,t.addEventListener("abort",n),t.addEventListener("progress",o),t.addEventListener("readystatechange",function e(){switch(t.readyState){case 0:case 1:break;case 2:r.receiveTime=new Date,r.responseHeaders=t.getAllResponseHeaders();break;case 3:break;case 4:if(r.loadTime)return;r.loadTime=new Date,r.status=+t.status,r.response=t.response,setTimeout(function(){try{r.aborted||v(t,r)}catch(e){}finally{t.__insight_follow__=void 0,t.removeEventListener("abort",n),t.removeEventListener("readystatechange",e),t.removeEventListener("progress",o)}})}}))}(this,{method:e,url:n,cgiTrace:r.cgiTrace,cgiTraceOptions:r.cgiTraceOptions});for(var o=arguments.length,i=new Array(2<o?o-2:0),a=2;a<o;a++)i[a-2]=arguments[a];return s.apply(this,[e,n].concat(i))}}),A(e,"setRequestHeader",function(n){return function(e,t){var r=this.__insight_follow__;return r&&(r.requestHeaders=r.requestHeaders||{},r.requestHeaders[e]=t),n.call(this,e,t)}}),A(e,"send",function(c){return function(){for(var e=this,n=e.__insight_follow__,t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];if(!n)return c.apply(this,r);n.sendTime=new Date,n.sendTrace=l("XHR Send (async)");for(var i=["onload","onabort","onerror","onprogress","onreadystatechange"],a=function(){var r=i[s];A(e,r,function(e){return u(e,{capture:function(e){var t=n.cgiTrace;e=L(e,n.sendTrace,t),f.push(me({source:"xhr-".concat(r)},e)),ae("XHR <".concat(r,"> 异常："),e)}})})},s=0;s<i.length;s++)a();return c.apply(this,r)}})},v=function(e,t){var r=t.method,n=t.url,o=t.sendTime,i=t.receiveTime,a=t.receiveBytes,s=t.loadTime,c=t.status,u=t.responseHeaders,l=t.response,f=t.cgiTrace,p=t.cgiTraceOptions,y=t.sendTrace,v=be(n),h=v.cgi,d=v.hostname,m=+i-+o||-1,g=+s-+o||-1,b=Math.max(+s-+i,1),_=0<a?1e3*a/b:0,w={cgi:h,status:c,rtt:m,cost:g,speed:se.speed(_)},j={method:r,url:n,cgi:h,hostname:d,rtt:m,cost:g,bytes:a,speed:_,status:c,responseHeaders:u,stack:L(y,f).stack,cookie:document.cookie};if(p&&E(p.extendReport))try{Object.assign(j,p.extendReport(e,t))}catch(e){}200!==c?k.push(me({message:T(w,"XHR 异常 ")},j)):("string"==typeof l&&function(){try{var e,t,r=JSON.parse(l);if("object"!==de(r))return;if(r.Response){var n=r.Response;n.Error&&(e=n.Code,t=n.Message)}else e=ce(r,"code",["err","error","ret","return"])[0],t=ce(r,"message",["err","error","ret","return"])[0]||ce(r,"msg",["err","error","ret","return"])[0];("string"==typeof e||"number"==typeof e&&0!==e)&&(o=e,i=t,S.push(me({code:isNaN(parseInt(o,10))?-99999:parseInt(o,10),errorCode:String(o),errorMessage:i,message:T({code:o,message:i,cgi:h},"CGI 错误 ")},j)))}catch(e){}var o,i}(),5e3<g&&O.push(me({message:T(w,"XHR 缓慢 ")},j)))};y(XMLHttpRequest.prototype);return{provideCgiTraceUrl:p.provide,spyForignFrameXHRByJqueryAjax:function(){if(window.$&&E($.ajax)){var i=XMLHttpRequest;A($,"ajax",function(o){return function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n="object"===de(t[0])?t[0]:t[1];return n&&E(n.xhr)&&A(n,"xhr",function(o){return function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=o.call(this,t);return!n||n instanceof i||y(n),n}}),o.apply(this,t)}})}}}}}}],we=Object.assign({},n);window.Insight=we=Object.assign(we,{install:function(e){F(e);for(var t=0;t<_e.length;t++){var r=_e[t];we=Object.assign(we,r.install(we,e))}return we}})}]);